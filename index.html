<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decadron | Onlu OdaklanmÄ±ÅŸ Sosyal Platform</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Roboto, Arial, sans-serif; background-color: #ffffff; margin: 0; display: flex; flex-direction: column; height: 100vh; color: #202124; }
        header { display: flex; justify-content: space-between; padding: 15px 30px; align-items: center; }
        .nav-link { text-decoration: none; color: #5f6368; font-size: 14px; }
        .auth-buttons a { text-decoration: none; font-size: 14px; padding: 8px 16px; margin-left: 10px; border-radius: 4px; }
        .signup { background-color: #004d4d; color: white !important; font-weight: bold; }
        
        main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: -50px; }
        .brand-name { font-size: 42px; font-weight: 300; letter-spacing: 4px; color: #004d4d; margin-bottom: 30px; text-transform: uppercase; }
        
        .action-buttons { display: flex; gap: 12px; margin-bottom: 35px; }
        .btn { background-color: #f8f9fa; border: 1px solid #f8f9fa; border-radius: 4px; color: #3c4043; padding: 10px 20px; cursor: pointer; transition: 0.2s; }
        .btn:hover { border: 1px solid #dadce0; box-shadow: 0 1px 1px rgba(0,0,0,.1); }
        
        .categories { font-size: 16px; color: #70757a; }
        .categories a { text-decoration: none; color: inherit; margin: 0 15px; padding-bottom: 5px; cursor: pointer; }
        .categories a:hover { color: #004d4d; border-bottom: 2px solid #004d4d; }
        
        /* Oda Listesi Paneli (Gizli) */
        #room-list-container { display: none; margin-top: 20px; width: 300px; border: 1px solid #ddd; border-radius: 8px; padding: 15px; }
        footer { padding: 15px; background: #f2f2f2; font-size: 14px; color: #70757a; display: flex; justify-content: center; gap: 25px; }
    </style>
</head>
<body>

    <header>
        <div class="nav-left"><a href="#" class="nav-link">Benim DecalarÄ±m</a></div>
        <div class="auth-buttons">
            <a href="login.html" class="login">GiriÅŸ Yap</a>
            <a href="signup.html" class="signup">Ãœye Ol</a>
        </div>
    </header>

    <main>
        <div class="brand-name">DECADRON</div>

        <div class="action-buttons">
            <button class="btn" onclick="quickJoin()">Rastgele Bir Deca'ya Gir</button>
            <button class="btn" onclick="toggleRooms()">Bir Deca SeÃ§</button>
            <button class="btn" onclick="createNewDeca()">Deca AÃ§</button>
        </div>

        <div class="categories">
            <a onclick="filterCategory('Sanat')">Sanat</a>
            <a onclick="filterCategory('Bilim')">Bilim</a>
            <a onclick="filterCategory('Felsefe')">Felsefe</a>
            <a onclick="filterCategory('LakLak')">LakLak</a>
        </div>

        <div id="room-list-container">
            <h4 style="margin-top:0">Aktif Decalar</h4>
            <ul id="rooms-ul" style="list-style:none; padding:0;"></ul>
        </div>
    </main>

    <footer>
        <span>&copy; 2026 Decadron</span>
        <a href="#">Telif HaklarÄ± & Etik Kurallar</a>
    </footer>

    <script>
        // BACKEND BAÄžLANTISI
        // Buradaki URL'yi backend'i yayÄ±na aldÄ±ÄŸÄ±nda gÃ¼ncelleyeceksin.
        const socket = io("http://localhost:3001"); 

        socket.on('connect', () => {
            console.log('Decadron Motoruna BaÄŸlanÄ±ldÄ±!');
        });

        function toggleRooms() {
            const container = document.getElementById('room-list-container');
            container.style.display = container.style.display === 'none' ? 'block' : 'none';
            socket.emit('list_rooms');
        }

        socket.on('rooms_list', (rooms) => {
            const ul = document.getElementById('rooms-ul');
            ul.innerHTML = '';
            rooms.forEach(room => {
                const li = document.createElement('li');
                li.innerHTML = `<b>${room.name}</b> (${room.count}/${room.capacity}) <button onclick="joinRoom('${room.id}')">Gir</button>`;
                li.style.marginBottom = "10px";
                ul.appendChild(li);
            });
        });

        function createNewDeca() {
            const name = prompt("Deca OdasÄ± AdÄ±:");
            const category = prompt("Kategori (Sanat, Bilim, Felsefe, LakLak):");
            if(name) socket.emit('create_room', { name, category });
        }

        function joinRoom(id) {
            socket.emit('join_room', { roomId: id });
        }

        socket.on('joined_room', (data) => {
            alert("Odaya girildi! RolÃ¼n: " + data.role);
        });

        socket.on('room_expanded', (data) => {
            alert("ðŸ”¥ Bu Deca popÃ¼ler olduÄŸu iÃ§in otomatik olarak 20 kiÅŸiye geniÅŸledi!");
        });
    </script>
</body>
</html>
